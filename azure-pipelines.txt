trigger:
- main 


variables:
  -name: process.clean
  value: false

pool: Default



stages:
- stage: Build
  displayName: 'Build the Spring Boot app'
  jobs:
    - job: Build
      displayName: 'Build and package the Spring Boot application'
      steps:
        - task: Maven@3
          displayName: 'Build with Maven'
          inputs:
            mavenPomFile: 'Maestria/src/pom.xml'  # Ruta al archivo pom.xml de tu proyecto
            goals: 'clean package'
            options: '-DskipTests=true'  # Evita ejecutar pruebas durante la compilación

- stage: Deploy
  displayName: 'Deploy to Azure'
  jobs:
    - job: Deploy
      displayName: 'Deploy to Azure App Service'
      steps:
        - task: AzureWebApp@1
          displayName: 'Deploy to Azure App Service'
          inputs:
            azureSubscription: 'Nombre-de-tu-conexión-de-Azure'  # Conexión de servicio de Azure en DevOps
            appName: $(webAppName)
            resourceGroupName: $(resourceGroup)
            package: '$(Build.ArtifactStagingDirectory)/Maetria/src/target/*.jar'  # Ruta al archivo JAR generado por Maven
